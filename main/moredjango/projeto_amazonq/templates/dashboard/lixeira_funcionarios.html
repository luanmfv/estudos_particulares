{% extends 'base.html' %}

{% block title %}Lixeira - Funcion√°rios{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">üóëÔ∏è Lixeira - Funcion√°rios Deletados</h1>
    <a href="{% url 'dashboard:gerenciar_dados' %}" class="btn btn-secondary">‚¨ÖÔ∏è Voltar</a>
</div>

<div class="alert alert-warning" role="alert">
    <strong>‚ö†Ô∏è Aten√ß√£o:</strong> Funcion√°rios nesta lixeira podem ser restaurados ou exclu√≠dos permanentemente.
</div>

<!-- Tabela de Funcion√°rios Deletados -->
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">üóëÔ∏è Funcion√°rios na Lixeira</h6>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>ID Original</th>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Cargo</th>
                        <th>Sal√°rio</th>
                        <th>Data Exclus√£o</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for funcionario in funcionarios_deletados %}
                    <tr>
                        <td>{{ funcionario.id_funcionario_original }}</td>
                        <td>{{ funcionario.nome }}</td>
                        <td>{{ funcionario.email }}</td>
                        <td>{{ funcionario.cargo }}</td>
                        <td>R$ {{ funcionario.salario|floatformat:2 }}</td>
                        <td>{{ funcionario.data_exclusao|date:"d/m/Y H:i" }}</td>
                        <td>
                            <a href="{% url 'dashboard:restaurar_funcionario' funcionario.id %}" 
                               class="btn btn-sm btn-success" 
                               onclick="return confirm('Restaurar funcion√°rio? Se j√° existir um funcion√°rio com mesmo ID, ele ser√° sobrescrito.')">
                               ‚ôªÔ∏è Restaurar
                            </a>
                            <a href="{% url 'dashboard:excluir_permanente' funcionario.id %}" 
                               class="btn btn-sm btn-danger" 
                               onclick="return confirm('ATEN√á√ÉO: Esta a√ß√£o √© IRREVERS√çVEL! Excluir permanentemente?')">
                               ‚ùå Excluir
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" class="text-center">
                            <div class="py-4">
                                <h5>üéâ Lixeira vazia!</h5>
                                <p class="text-muted">Nenhum funcion√°rio foi deletado recentemente.</p>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Informa√ß√µes sobre a Lixeira -->
<div class="card shadow">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">‚ÑπÔ∏è Como funciona a Lixeira</h6>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6>‚ôªÔ∏è Restaurar Funcion√°rio:</h6>
                <ul>
                    <li>Funcion√°rio volta para a lista principal</li>
                    <li>Se j√° existir funcion√°rio com mesmo ID, ser√° sobrescrito</li>
                    <li>Todos os dados originais s√£o mantidos</li>
                </ul>
            </div>
            <div class="col-md-6">
                <h6>‚ùå Excluir Permanentemente:</h6>
                <ul>
                    <li>Remove definitivamente da lixeira</li>
                    <li>A√ß√£o irrevers√≠vel</li>
                    <li>Dados n√£o podem ser recuperados</li>
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock %}